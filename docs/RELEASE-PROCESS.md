# Release Process (O1.3)

This document describes how we version, tag, and publish Kubilitics releases. The CI/CD pipeline (`.github/workflows/release.yml`) builds and attaches artifacts when a version tag is pushed.

## Versioning

We use [Semantic Versioning](https://semver.org/) (SemVer):

- **MAJOR** (e.g. 2.0.0): Breaking API or behavior changes.
- **MINOR** (e.g. 1.1.0): New features, backward compatible.
- **PATCH** (e.g. 1.0.1): Bug fixes and minor improvements, backward compatible.

Pre-release versions use a hyphen: `v1.2.0-beta.1`, `v1.0.0-rc.1`.

## Repo layout and version numbers

- **Backend:** `kubilitics-backend/go.mod` (module version; app version can be set via ldflags or a constant).
- **Frontend:** `kubilitics-frontend/package.json` → `version`.
- **Desktop:** `kubilitics-desktop/src-tauri/tauri.conf.json` → `version`; `Cargo.toml` → `version`.
- **Website:** Optional; can track main app version or stay independent.
- **Helm chart:** `deploy/helm/kubilitics/Chart.yaml` → `version` and `appVersion`.

For a release, update these to the same logical version (e.g. 1.2.0) before tagging, or document the policy (e.g. “chart appVersion tracks backend image tag”).

## Tagging and triggering a release

1. **Prepare the release:**
   - Bump version in the relevant packages (see above).
   - Update `CHANGELOG.md` (or release notes) with changes since the last tag.
   - Run tests and ensure CI is green: `make test`, and/or rely on PR checks.

2. **Create and push the tag:**
   ```bash
   git tag -a v1.2.0 -m "Release v1.2.0"
   git push origin v1.2.0
   ```

3. **CI does the rest:**
   - `.github/workflows/release.yml` runs on push of tags matching `v*`.
   - **Backend:** Builds Linux amd64/arm64 binaries; uploads artifact.
   - **Desktop:** Builds macOS, Windows, and Linux (x64 and ARM64) installers; uploads artifacts.
   - **Release job:** Downloads all artifacts and creates a GitHub Release with `softprops/action-gh-release` (release notes can be generated or pasted).

4. **After the release:**
   - Edit the GitHub Release to add a human-readable description and changelog if not auto-generated.
   - Optionally publish the Helm chart (e.g. push to a chart repo or GitHub Pages).
   - Announce (e.g. Discord, Twitter, docs).

## Changelog and release notes

- **CHANGELOG.md:** Keep a project-root or docs changelog with sections per version (e.g. `## [1.2.0] - 2026-02-04`). Add entries when cutting a release.
- **Release notes:** Can be:
  - Manually written when creating/editing the GitHub Release, or
  - Auto-generated by the workflow (`generate_release_notes: true`), or
  - Derived from a CHANGELOG section (script or copy-paste).

## Repeatability checklist

- [ ] Version numbers updated in backend, frontend, desktop, and chart (as applicable).
- [ ] CHANGELOG.md (or equivalent) updated.
- [ ] Tag created and pushed (`v*`).
- [ ] Release workflow runs and artifacts are attached to the GitHub Release.
- [ ] Release description and install instructions (desktop download, Helm, k3s/kind) updated or linked from the website.

For contributor-facing steps (fork, branch, PR, review), see [CONTRIBUTING.md](../CONTRIBUTING.md). For distribution details (signing, installers, Helm), see [DISTRIBUTION.md](DISTRIBUTION.md).
