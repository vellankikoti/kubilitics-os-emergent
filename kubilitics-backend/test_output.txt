=== RUN   TestClusterService_GetCluster_Found
--- PASS: TestClusterService_GetCluster_Found (0.00s)
=== RUN   TestClusterService_ListClusters_WithClusters
--- PASS: TestClusterService_ListClusters_WithClusters (0.00s)
=== RUN   TestClusterService_RemoveCluster_Found
--- PASS: TestClusterService_RemoveCluster_Found (0.00s)
=== RUN   TestClusterService_NewClusterService_WithConfig
--- PASS: TestClusterService_NewClusterService_WithConfig (0.00s)
=== RUN   TestClusterService_NewClusterService_WithNilConfig
--- PASS: TestClusterService_NewClusterService_WithNilConfig (0.00s)
=== RUN   TestClusterService_GetClient_NotFound
--- PASS: TestClusterService_GetClient_NotFound (0.00s)
=== RUN   TestClusterService_ListClusters_EmptyRepo
--- PASS: TestClusterService_ListClusters_EmptyRepo (0.00s)
=== RUN   TestClusterService_RemoveCluster_NotFound
--- PASS: TestClusterService_RemoveCluster_NotFound (0.00s)
=== RUN   TestClusterService_ListClusters_FromRepo
--- PASS: TestClusterService_ListClusters_FromRepo (0.00s)
=== RUN   TestClusterService_GetCluster_FromRepo
--- PASS: TestClusterService_GetCluster_FromRepo (0.00s)
=== RUN   TestClusterService_AddCluster_RespectsMaxClusters
[AddCluster] Starting for context: ctx, path: /nonexistent/kubeconfig
    cluster_service_test.go:151: expected cluster limit error, got: maximum cluster count reached (1)
--- FAIL: TestClusterService_AddCluster_RespectsMaxClusters (0.00s)
=== RUN   TestClusterService_DiscoverClusters_ReturnsNonEmptyID
--- PASS: TestClusterService_DiscoverClusters_ReturnsNonEmptyID (0.00s)
=== RUN   TestClusterService_AddCluster_Idempotent
[AddCluster] Starting for context: ctx-one, path: /var/folders/db/9qn8xnys1zg5d4nw27c5tf0r0000gn/T/TestClusterService_AddCluster_Idempotent2426806464/001/kubeconfig
[AddCluster] Initializing K8s client for ctx-one
[AddCluster] Testing connection for ctx-one (5s timeout)
[AddCluster] Connection test successful for ctx-one
[AddCluster] Persisting new cluster ebd2b2f5-c585-4203-a822-709521b66baf in repo
[AddCluster] Successfully registered ebd2b2f5-c585-4203-a822-709521b66baf
[AddCluster] Starting for context: ctx-one, path: /var/folders/db/9qn8xnys1zg5d4nw27c5tf0r0000gn/T/TestClusterService_AddCluster_Idempotent2426806464/001/kubeconfig
[AddCluster] Initializing K8s client for ctx-one
[AddCluster] Testing connection for ctx-one (5s timeout)
[AddCluster] Connection test successful for ctx-one
[AddCluster] Idempotent match found, updating cluster ebd2b2f5-c585-4203-a822-709521b66baf
--- PASS: TestClusterService_AddCluster_Idempotent (0.00s)
=== RUN   TestClusterService_AddCluster_ConnectionFailure
[AddCluster] Starting for context: fail-ctx, path: /var/folders/db/9qn8xnys1zg5d4nw27c5tf0r0000gn/T/TestClusterService_AddCluster_ConnectionFailure3012826477/001/kubeconfig-fail
[AddCluster] Initializing K8s client for fail-ctx
[AddCluster] Testing connection for fail-ctx (5s timeout)
[AddCluster] Connection test successful for fail-ctx
[AddCluster] Persisting new cluster c31f8992-ccfc-4604-9e68-60eb98f3d668 in repo
[AddCluster] Successfully registered c31f8992-ccfc-4604-9e68-60eb98f3d668
--- PASS: TestClusterService_AddCluster_ConnectionFailure (0.00s)
FAIL
FAIL	github.com/kubilitics/kubilitics-backend/internal/service	0.493s
FAIL
